<html>
<head>

<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
<meta charset="utf-8">
<script type="text/javascript" src="http://maps.google.com/maps/api/js?key=AIzaSyDBohGPT8kmS5GlAvsXk5jC_oVG6Wpfmjo&sensor=true"></script>
<script type="text/javascript" src="jquery-1.4.2.min.js"></script>

<script type="text/javascript">
  var map;
  var addr;

function initialize() {

	
  //var myLatlng = new google.maps.LatLng(24.99178889,121.3005028);
  var myLatlngc = new google.maps.LatLng(24.98367,121.453586);
  var mapOptions = {
    zoom: 20,
    center: myLatlngc,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  };

  map = new google.maps.Map(document.getElementById('map_canvas'), mapOptions);
var mark = new google.maps.Marker({position:myLatlngc, map:map});
   
var options = {
    enableHighAccuracy:true,  //是否启动高精度，启用后会很费电
    timeout:100,     //timeout 会控制浏览器确定位置的时间，默认是毫秒。
    maximumAge: 0    //这个值是保存缓存的时间，如果在时间之内请求定位，会用缓存的值，如果超过时间，请求现在的位置信息
};

  
 //    
 if(navigator.geolocation) {   //查看是否支持定位，如果不支持，则navigator.geolocation返回null
      alert("Oops,  geolocation support");
	   navigator.geolocation.getCurrentPosition(displayLocation, displayError,{maximumAge:60000, timeout:5000, enableHighAccuracy:true}); 

    } else {
        alert("Oops, no geolocation support");
    }
   
     

    

 //
  
  map.setZoom(15);
  
}

//successHandler
function displayLocation (position){  //position是地理定位API向它传入一个position对象，其中包含有关浏览器位置的信息
    var latitude = position.coords.latitude;
    var longitude = position.coords.longitude;
 
			 var myLatlngme = new google.maps.LatLng(position.coords.latitude,position.coords.longitude);
  var mapOptions = {
    zoom: 20,
    center: myLatlngme,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  };
			 map = new google.maps.Map(document.getElementById('map_canvas'), mapOptions);
	      
            var markerme = new google.maps.Marker({ position: myLatlngme,  icon: 'ty_me.png',map: map, title: '我的位置'});
          
           
     
  
}
function displayError(error) {
}


  



  

   

   

  google.maps.event.addDomListener(window, 'load', initialize);

</script>

</head>

<body>

<div id="map_canvas" style="width:100%;height:100%"></div>
<div style="width:100%;height:50%;overflow:auto">

   

  <div id="directions_panel" style="width:100%"></div>

</div>



 

</body>

</html>
